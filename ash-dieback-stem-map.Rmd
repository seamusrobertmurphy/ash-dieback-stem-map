---
title: "Vertinetik: Ash-Dieback Stem Detection"
author: "SM"
date: "`r Sys.Date()`"
output: 
  html_document:
    toc: TRUE
    toc_depth: 5
    number_sections: FALSE
    df_print: tibble
  urlcolor: blue
---


```{r setup, echo=FALSE, message=FALSE,warning=FALSE, error=FALSE}
library(lidR)
library(rgl)
library(pandocfilters)
library(rmarkdown)
library(formatR)
library(gitignore)
library(tinytex)
library(knitr)
library(raster)
library(webdriver)
library(webshot)
library(webshot2)
library(terra)
library(matlab)
#webshot::install_phantomjs(force = TRUE)
knit_hooks$set(webgl = hook_webgl)
knit_hooks$set(rgl.static = hook_rgl)
knitr::opts_chunk$set(echo = TRUE, warning=FALSE, error=FALSE, message = FALSE)
set.seed(23)
```

## LiDAR Processing: Visualize, Classify, Clean, Visualize

```{r, rgl.static=TRUE, cache=TRUE}
#Visualize
defaultCRS<-CRS("+init=EPSG:3857")
las_tile = readLAS("/media/seamus/USB1/Shavington/clouda340d379a59ddadf.las", select = 'xyzcr', filter = '-drop_class 19')
plot(las_tile, bg = "white")
#Classify ground & noise
las_tile_csf = classify_ground(las_tile, csf(sloop_smooth=TRUE, 0.5, 1))
las_tile_csf_so = classify_noise(las_tile_csf, sor(k=10, m=3))
#Clean noise
las_tile_csf_sor_norm = normalize_height(las_tile_csf_sor, knnidw())
las_tile_chm = grid_canopy(las_tile_csf_sor_norm, 1, dsmtin(8))
#Clean paths
las_tile_chm = filter_duplicates(las_tile_chm)
plot(las_tile_chm, col = height.colors(50))
```


## LiDAR Processing: Classify  ground points


```{r cars}
summary(cars)
```

## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}
plot(pressure)
```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
